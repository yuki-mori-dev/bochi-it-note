---
// Props: title, description, noindex (optional)
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import "../styles/global.css";

const { title = "Bochi IT Note", description = "日本の中小企業向けSaaS選定の要件適合ナレッジとテンプレート", noindex = false } = Astro.props;
---

<html lang="ja">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<title>{title}</title>
		<meta name="description" content={description} />
		{noindex && <meta name="robots" content="noindex,nofollow" />}
		<meta property="og:title" content={title} />
		<meta property="og:description" content={description} />
		<meta property="og:type" content="website" />
		<link rel="canonical" href={`https://bochi-it-note.com${Astro.url.pathname}`} />
		<meta property="og:url" content={`https://bochi-it-note.com${Astro.url.pathname}`} />
		{import.meta.env.PUBLIC_GA_ID && (
			<>
				<script async src={`https://www.googletagmanager.com/gtag/js?id=${import.meta.env.PUBLIC_GA_ID}`}></script>
				<script is:inline>
					window.dataLayer = window.dataLayer || [];
					function gtag(){dataLayer.push(arguments);} gtag('js', new Date());
					gtag('config', '{import.meta.env.PUBLIC_GA_ID}');
				</script>
			</>
		)}
		<script is:inline>
			(function(){
				function assignVariant(){
					try{
						var key='ab:home-cta';
						var v=localStorage.getItem(key);
						if(!v){ v=Math.random()<0.5?'A':'B'; localStorage.setItem(key,v); }
						window.__variant=v;
						document.documentElement.setAttribute('data-variant', v);
					}catch(e){}
				}
				function sendEvent(detail){
					try{
						if(window.gtag){ window.gtag('event','click',{event_category:'interaction',...detail}); }
						var k='stats:click:'+(detail.name||'unknown');
						var c=Number(localStorage.getItem(k)||'0')+1; localStorage.setItem(k,String(c));
					}catch(e){}
				}
				document.addEventListener('DOMContentLoaded',function(){
					assignVariant();
					document.addEventListener('click',function(e){
						var el=e.target && e.target.closest && e.target.closest('[data-track]');
						if(!el) return;
						sendEvent({
							name: el.getAttribute('data-track'),
							variant: window.__variant || 'A',
							href: el.getAttribute('href')||null,
							id: el.getAttribute('data-id')||null,
							slug: el.getAttribute('data-slug')||null,
							type: el.getAttribute('data-type')||null,
							page: location.pathname
						});
					}, {capture:true});
				});
			})();
		</script>
	</head>
	<body class="min-h-screen bg-white text-gray-900">
		<Header />
		<main class="mx-auto max-w-6xl px-4 py-8">
			<slot />
		</main>
		<Footer />
	</body>

</html>


